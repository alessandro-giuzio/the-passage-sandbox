---
import Layout from '../layouts/Layout.astro';
import { Image } from 'astro:assets';
import salon from '../assets/apto-2-hab.jpg';

const typoOptions = [
  { id: 'a', label: 'Opción A (Cormorant + Inter)' },
  { id: 'b', label: 'Opción B (Sora + Inter)' },
  { id: 'c', label: 'Opción C (DM Serif + DM Sans)' },
];

const apartments = [
  {
    name: 'Studio Apartment',
    meta: '2 personas • 1 baño • 24m²',
    price: 'Desde 129€ / noche',
    note: 'Perfecto para escapadas cortas.',
  },
  {
    name: 'Superior Studio',
    meta: '2 personas • 1 baño • 28m²',
    price: 'Desde 149€ / noche',
    note: 'Más luz, más espacio, misma calma.',
  },
  {
    name: 'Family Apartment (Long Name Stress Test)',
    meta: '4 personas • 1 baño • 42m²',
    price: 'Desde 189€ / noche',
    note: 'Ideal para estancias más largas.',
  },
];

const faqs = [
  {
    q: '¿Cómo funciona el self check-in?',
    a: 'Te enviamos instrucciones claras el día de llegada. Acceso sencillo y sin esperas.',
  },
  {
    q: '¿Hay cancelación flexible?',
    a: 'Depende de la tarifa. En la reserva verás siempre la política exacta antes de confirmar.',
  },
  {
    q: '¿Se admiten mascotas?',
    a: 'En algunas unidades sí. Si vienes con mascota, indícalo al reservar para confirmarlo.',
  },
  {
    q: '¿Tenéis parking?',
    a: 'No propio. Te recomendamos parkings cercanos y zonas convenientes según tu plan.',
  },
  {
    q: '¿Hay Wi-Fi y zona de trabajo?',
    a: 'Sí. Wi-Fi rápido y un espacio cómodo para teletrabajo (según apartamento).',
  },
  {
    q: '¿A qué hora es la entrada y la salida?',
    a: 'Entrada desde la tarde y salida por la mañana. Los horarios exactos se confirman en la reserva.',
  },
];
---

<Layout>
  <main class='max-w-6xl px-4 py-8 mx-auto md:px-6 md:py-10'>
    <!-- Top bar / controls -->
    <header
      class='flex flex-col gap-4 mb-7 md:flex-row md:items-end md:justify-between'>
      <div>
        <p class='text-sm font-medium tracking-wide text-(--tp-muted)'>
          The Passage — Design Sandbox
        </p>
        <h1
          class='tp-heading mt-2 text-3xl font-semibold tracking-tight md:text-4xl'>
          Mock Home
        </h1>
        <p class='mt-2 max-w-2xl text-sm leading-relaxed text-(--tp-muted)'>
          Esta página simula una homepage real para decidir tipografía y colores
          con contexto: navegación, hero, tarjetas, formularios, testimonios,
          FAQ y footer.
        </p>
      </div>

      <div class='flex flex-col gap-3 sm:flex-row sm:items-center'>
        <!-- Typography -->
        <label class='flex items-center gap-2 text-sm text-(--tp-muted)'>
          Tipografía
          <select
            id='typoSelect'
            class='rounded-xl border border-(--tp-border) bg-(--tp-surface) px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-(--tp-accent)'>
            {typoOptions.map(o => <option value={o.id}>{o.label}</option>)}
          </select>
        </label>

        <!-- Viewport -->
        <div class='flex items-center gap-2'>
          <span class='text-sm text-(--tp-muted)'>Vista</span>
          <div
            id='vpGroup'
            class='inline-flex rounded-xl border border-(--tp-border) bg-(--tp-surface) p-1 shadow-sm'>
            <button
              type='button'
              class='px-3 py-2 text-sm font-medium rounded-lg tp-vp-btn'
              data-vp='mobile'>
              Móvil
            </button>
            <button
              type='button'
              class='px-3 py-2 text-sm font-medium rounded-lg tp-vp-btn'
              data-vp='tablet'>
              Tablet
            </button>
            <button
              type='button'
              class='px-3 py-2 text-sm font-medium rounded-lg tp-vp-btn'
              data-vp='desktop'>
              Desktop
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Viewport frame -->
    <section
      id='frame'
      class='mx-auto'
      data-typo='a'
      data-vp='desktop'
      aria-label='Vista previa'>
      <div
        class='overflow-hidden rounded-3xl border border-(--tp-border) bg-(--tp-surface) shadow-sm'>
        <!-- Site header -->
        <div class='tp-header border-b border-(--tp-border) px-5 py-4'>
          <div class='flex flex-col gap-4 tp-header-inner'>
            <div class='flex items-center gap-3'>
              <div
                class='h-10 w-10 rounded-2xl border border-(--tp-border) bg-(--tp-surface-2)'
                aria-hidden='true'>
              </div>
              <div>
                <div class='tp-heading text-lg font-semibold tracking-wide'>
                  THE PASSAGE
                </div>
                <div class='text-xs text-(--tp-muted)'>
                  Apartments • Donostia / San Sebastián
                </div>
              </div>
            </div>

            <nav
              class='tp-nav flex flex-wrap items-center gap-1.5 text-sm text-(--tp-muted)'>
              <a class='rounded-lg px-3 py-2 hover:bg-(--tp-surface-2)' href='#'
                >Apartamentos</a
              >
              <a class='rounded-lg px-3 py-2 hover:bg-(--tp-surface-2)' href='#'
                >Ubicación</a
              >
              <a class='rounded-lg px-3 py-2 hover:bg-(--tp-surface-2)' href='#'
                >Preguntas frecuentes</a
              >
              <a class='rounded-lg px-3 py-2 hover:bg-(--tp-surface-2)' href='#'
                >Contacto</a
              >
              <a
                class='rounded-lg bg-(--tp-accent) px-3 py-2 font-semibold text-(--tp-text) hover:bg-(--tp-accent-dark)'
                href='#'>
                Reservar
              </a>
            </nav>
          </div>
        </div>

        <!-- Hero -->
        <section class='px-5 py-7'>
          <div class='grid gap-6 tp-hero'>
            <div>
              <p
                class='text-xs font-semibold uppercase tracking-widest text-(--tp-muted-2)'>
                Edificio histórico • 1881
              </p>

              <h2 class='mt-3 text-4xl leading-tight tracking-tight tp-heading'>
                Una estancia tranquila en el corazón de Donostia.
              </h2>

              <p
                class='mt-4 max-w-xl text-base leading-relaxed text-(--tp-muted)'>
                Apartamentos pensados para viajar sin prisa: comodidad, carácter
                local y todo lo necesario para sentirte en casa — un fin de
                semana o una estancia larga.
              </p>

              <div class='flex flex-col gap-3 mt-5 sm:flex-row sm:flex-wrap'>
                <a
                  href='#'
                  class='inline-flex items-center justify-center rounded-xl bg-(--tp-accent) px-4 py-2.5 text-sm font-semibold text-(--tp-text) hover:bg-(--tp-accent-dark)'>
                  Comprobar disponibilidad
                </a>
                <a
                  href='#'
                  class='inline-flex items-center justify-center rounded-xl border border-(--tp-border) bg-(--tp-surface) px-4 py-2.5 text-sm font-semibold text-(--tp-text) hover:bg-(--tp-surface-2)'>
                  Ver apartamentos
                </a>
              </div>

              <div
                class='mt-4 flex flex-wrap gap-x-4 gap-y-1 text-xs text-(--tp-muted-2)'>
                <span>Cancelación flexible</span>
                <span>Wi-Fi rápido</span>
                <span>Self check-in</span>
              </div>
            </div>

            <!-- Booking card -->
            <aside>
              <div
                class='rounded-2xl border border-(--tp-border) bg-(--tp-surface-2) p-5'>
                <div class='flex items-start justify-between gap-3'>
                  <div>
                    <div class='text-xl font-semibold tp-heading'>
                      Reserva rápida
                    </div>
                    <div class='mt-1 text-sm text-(--tp-muted)'>
                      Selecciona fechas y huéspedes
                    </div>
                  </div>
                  <div class='text-right'>
                    <div class='text-xs text-(--tp-muted-2)'>Desde</div>
                    <div class='text-xl font-semibold'>129€</div>
                    <div class='text-xs text-(--tp-muted-2)'>por noche</div>
                  </div>
                </div>

                <div class='grid gap-3 mt-4'>
                  <label class='text-xs font-medium text-(--tp-muted)'>
                    Fechas
                    <input
                      class='mt-1 w-full rounded-xl border border-(--tp-border) bg-(--tp-surface) px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-(--tp-accent)'
                      placeholder='Entrada → Salida'
                    />
                  </label>

                  <label class='text-xs font-medium text-(--tp-muted)'>
                    Huéspedes
                    <select
                      class='mt-1 w-full rounded-xl border border-(--tp-border) bg-(--tp-surface) px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-(--tp-accent)'>
                      <option>1 huésped</option>
                      <option selected>2 huéspedes</option>
                      <option>3 huéspedes</option>
                      <option>4 huéspedes</option>
                    </select>
                  </label>

                  <button
                    class='rounded-xl bg-(--tp-accent) px-4 py-2.5 text-sm font-semibold text-(--tp-text) hover:bg-(--tp-accent-dark)'
                    type='button'>
                    Reservar
                  </button>

                  <p class='text-xs text-(--tp-muted-2)'>
                    Consejo: prueba esto en móvil — etiquetas y helper text
                    importan.
                  </p>
                </div>
              </div>
            </aside>
          </div>
        </section>

        <!-- Apartments -->
        <section class='border-t border-(--tp-border) px-5 py-7'>
          <div class='flex flex-col gap-2'>
            <div>
              <h3 class='text-2xl font-semibold tracking-tight tp-heading'>
                Apartamentos
              </h3>
              <p class='mt-2 text-sm leading-relaxed text-(--tp-muted)'>
                Tarjetas con contenido real: nombres, metadatos, precio y CTA.
              </p>
            </div>

            <a
              class='text-sm font-semibold text-(--tp-accent-dark) hover:underline'
              href='#'>
              Ver todos →
            </a>
          </div>

          <div class='grid gap-4 mt-5 tp-grid-apartments'>
            {
              apartments.map(a => (
                <article class='rounded-2xl border border-(--tp-border) bg-(--tp-surface) p-5 shadow-sm'>
                  <Image
                    src={salon}
                    alt='Foto del apartamento'
                    class='h-36 w-full rounded-xl border border-[--tp-border] bg-[--tp-surface-2] object-cover'
                    format='webp'
                  />

                  <h4 class='mt-4 text-xl font-semibold leading-snug tp-heading'>
                    {a.name}
                  </h4>

                  <p class='mt-1 text-sm text-(--tp-muted)'>{a.meta}</p>
                  <p class='mt-3 text-sm font-semibold'>{a.price}</p>

                  <p class='mt-2 text-sm leading-relaxed text-(--tp-muted)'>
                    {a.note}
                  </p>

                  <div class='flex flex-wrap gap-2 mt-4'>
                    <a
                      href='#'
                      class='rounded-xl bg-(--tp-accent) px-3 py-2 text-sm font-semibold text-(--tp-text) hover:bg-(--tp-accent-dark)'>
                      Ver detalles
                    </a>
                    <a
                      href='#'
                      class='rounded-xl border border-(--tp-border) bg-(--tp-surface) px-3 py-2 text-sm font-semibold hover:bg-(--tp-surface-2)'>
                      Favorito
                    </a>
                  </div>
                </article>
              ))
            }
          </div>
        </section>

        <!-- Highlights -->
        <section class='border-t border-(--tp-border) px-5 py-7'>
          <h3 class='text-2xl font-semibold tracking-tight tp-heading'>
            Una experiencia sin complicaciones
          </h3>

          <div class='grid gap-4 mt-5 tp-grid-highlights'>
            {
              [
                [
                  'Ubicación práctica',
                  'Cerca de todo, sin el ruido de lo turístico.',
                ],
                [
                  'Descanso primero',
                  'Cama, ducha y luz pensadas para recargar.',
                ],
                [
                  'Recomendaciones locales',
                  'Comer y pasear como si vivieras aquí.',
                ],
              ].map(([t, d]) => (
                <div class='rounded-2xl border border-(--tp-border) bg-(--tp-surface) p-5 shadow-sm'>
                  <div class='flex items-start gap-3'>
                    <div
                      class='mt-0.5 h-10 w-10 rounded-2xl border border-(--tp-border) bg-(--tp-surface-2)'
                      aria-hidden='true'
                    />
                    <div>
                      <h4 class='text-sm font-semibold'>{t}</h4>
                      <p class='mt-2 text-sm leading-relaxed text-(--tp-muted)'>
                        {d}
                      </p>
                    </div>
                  </div>
                </div>
              ))
            }
          </div>
        </section>

        <!-- Testimonials -->
        <section class='border-t border-(--tp-border) px-5 py-7'>
          <div class='flex flex-col gap-2'>
            <div>
              <h3 class='text-2xl font-semibold tracking-tight tp-heading'>
                Lo que dicen los huéspedes
              </h3>
              <p class='mt-2 text-sm leading-relaxed text-(--tp-muted)'>
                Textos cortos y largos para comprobar ritmo y legibilidad.
              </p>
            </div>

            <div class='text-xs text-(--tp-muted-2)'>★★★★★ (ejemplo)</div>
          </div>

          <div class='grid gap-4 mt-5 tp-grid-testimonials'>
            {
              [
                [
                  '“Precioso, súper tranquilo y con ubicación perfecta.”',
                  'Parecía que vivíamos en Donostia. Todo fue muy fácil.',
                ],
                [
                  '“Detalles cuidados y cama increíble.”',
                  'El self check-in fue claro y rápido. Volveríamos sin dudar.',
                ],
                [
                  '“Ideal para estancias largas.”',
                  'Cocina práctica, buena luz y un ambiente muy calmado. Repetiremos.',
                ],
              ].map(([quote, body]) => (
                <figure class='rounded-2xl border border-(--tp-border) bg-(--tp-surface) p-5 shadow-sm'>
                  <blockquote class='text-lg leading-relaxed tp-heading'>
                    {quote}
                  </blockquote>
                  <figcaption class='mt-3 text-sm leading-relaxed text-(--tp-muted)'>
                    {body}
                  </figcaption>
                  <div class='mt-4 text-xs text-(--tp-muted-2)'>
                    — Reseña (ejemplo)
                  </div>
                </figure>
              ))
            }
          </div>
        </section>

        <!-- FAQ -->
        <section class='border-t border-(--tp-border) px-5 py-7'>
          <h3 class='text-2xl font-semibold tracking-tight tp-heading'>
            Preguntas frecuentes
          </h3>
          <p class='mt-2 text-sm leading-relaxed text-(--tp-muted)'>
            Acordeón simple para comprobar microtexto, enlaces y jerarquía.
          </p>

          <div class='grid gap-3 mt-5'>
            {
              faqs.map(f => (
                <details class='rounded-2xl border border-(--tp-border) bg-(--tp-surface) p-5'>
                  <summary class='text-sm font-semibold list-none cursor-pointer'>
                    <span class='inline-flex items-center gap-2'>
                      <span
                        class='inline-block h-2 w-2 rounded-full bg-(--tp-accent)'
                        aria-hidden='true'
                      />
                      {f.q}
                    </span>
                  </summary>
                  <p class='mt-3 text-sm leading-relaxed text-(--tp-muted)'>
                    {f.a}
                  </p>
                </details>
              ))
            }
          </div>
        </section>

        <!-- Footer -->
        <footer
          class='border-t border-(--tp-border) bg-(--tp-surface-2) px-5 py-7'>
          <div class='grid gap-6 tp-footer'>
            <div>
              <div class='tp-heading text-lg font-semibold tracking-wide'>
                THE PASSAGE
              </div>
              <p class='mt-2 text-sm leading-relaxed text-(--tp-muted)'>
                Apartamentos en Donostia / San Sebastián. Diseño pensado para
                descansar y vivir la ciudad con calma.
              </p>
            </div>

            <div class='grid gap-4 tp-footer-cols'>
              <div>
                <div
                  class='text-xs font-semibold uppercase tracking-widest text-(--tp-muted-2)'>
                  Enlaces
                </div>
                <ul class='mt-3 space-y-2 text-sm text-(--tp-muted)'>
                  <li>
                    <a class='hover:underline' href='#'>Apartamentos</a>
                  </li>
                  <li><a class='hover:underline' href='#'>Ubicación</a></li>
                  <li><a class='hover:underline' href='#'>FAQ</a></li>
                </ul>
              </div>

              <div>
                <div
                  class='text-xs font-semibold uppercase tracking-widest text-(--tp-muted-2)'>
                  Contacto
                </div>
                <ul class='mt-3 space-y-2 text-sm text-(--tp-muted)'>
                  <li><a class='hover:underline' href='#'>Email</a></li>
                  <li><a class='hover:underline' href='#'>WhatsApp</a></li>
                  <li><a class='hover:underline' href='#'>Cómo llegar</a></li>
                </ul>
              </div>

              <div>
                <div
                  class='text-xs font-semibold uppercase tracking-widest text-(--tp-muted-2)'>
                  Legal
                </div>
                <ul class='mt-3 space-y-2 text-sm text-(--tp-muted)'>
                  <li>
                    <a class='hover:underline' href='#'
                      >Política de privacidad</a
                    >
                  </li>
                  <li><a class='hover:underline' href='#'>Cookies</a></li>
                  <li><a class='hover:underline' href='#'>Términos</a></li>
                </ul>
              </div>
            </div>
          </div>

          <div
            class='mt-6 flex flex-col gap-2 border-t border-(--tp-border) pt-5 text-xs text-(--tp-muted-2) md:flex-row md:items-center md:justify-between'>
            <span>© {new Date().getFullYear()} The Passage (mock)</span>
            <span>Colores: Warm palette • Tipografía: A/B/C</span>
          </div>
        </footer>
      </div>
    </section>
  </main>

  <style is:global>
    /* Warm palette (the one we made before) */
    :root {
      --tp-bg: #f7f2ea; /* warm off-white */
      --tp-surface: #ffffff; /* card surface */
      --tp-surface-2: #faf6f0; /* soft sand */
      --tp-text: #1c1b17; /* near black */
      --tp-muted: #6f6a62; /* warm grey */
      --tp-border: #e6dfd4; /* warm border */
      --tp-accent: #d8b48a; /* beige-gold */
      --tp-accent-dark: #b69063;
      --tp-muted-2: #9a948b; /* secondary muted */
    }

    /* Fonts (A/B/C) - apply to body so the control panel also gets updated */
    body[data-typo='a'] {
      --font-heading: 'Cormorant Garamond', ui-serif, Georgia, serif;
      --font-body:
        'Inter', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto,
        Arial, 'Noto Sans', 'Noto Sans JP', sans-serif;
    }
    body[data-typo='b'] {
      --font-heading:
        'Sora', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto,
        Arial, 'Noto Sans', 'Noto Sans JP', sans-serif;
      --font-body:
        'Inter', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto,
        Arial, 'Noto Sans', 'Noto Sans JP', sans-serif;
    }
    body[data-typo='c'] {
      --font-heading: 'DM Serif Display', ui-serif, Georgia, serif;
      --font-body:
        'DM Sans', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto,
        Arial, 'Noto Sans', 'Noto Sans JP', sans-serif;
    }

    /* Apply font vars globally */
    body {
      font-family: var(--font-body);
    }
    .tp-heading {
      font-family: var(--font-heading) !important;
    }

    /* Keep frame-specific font rules for backwards compatibility */
    #frame[data-typo='a'] {
      --font-heading: 'Cormorant Garamond', ui-serif, Georgia, serif;
      --font-body:
        'Inter', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto,
        Arial, 'Noto Sans', 'Noto Sans JP', sans-serif;
    }
    #frame[data-typo='b'] {
      --font-heading:
        'Sora', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto,
        Arial, 'Noto Sans', 'Noto Sans JP', sans-serif;
      --font-body:
        'Inter', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto,
        Arial, 'Noto Sans', 'Noto Sans JP', sans-serif;
    }
    #frame[data-typo='c'] {
      --font-heading: 'DM Serif Display', ui-serif, Georgia, serif;
      --font-body:
        'DM Sans', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto,
        Arial, 'Noto Sans', 'Noto Sans JP', sans-serif;
    }

    #frame {
      font-family: var(--font-body);
    }
    #frame .tp-heading {
      font-family: var(--font-heading) !important;
    }

    /* Viewport sizes (frame width) */
    #frame[data-vp='mobile'] {
      max-width: 390px;
    }
    #frame[data-vp='tablet'] {
      max-width: 820px;
    }
    #frame[data-vp='desktop'] {
      max-width: 1100px;
    }

    /* ---- The important part: “responsiveness” based on the frame mode ----
     We avoid Tailwind md: breakpoints INSIDE the frame, and control layout here.
  */
    /* Base (mobile-first) */
    .tp-header-inner {
    }
    .tp-hero,
    .tp-grid-apartments,
    .tp-grid-highlights,
    .tp-grid-testimonials,
    .tp-footer,
    .tp-footer-cols {
      display: grid;
    }
    .tp-hero {
      grid-template-columns: 1fr;
    }
    .tp-grid-apartments {
      grid-template-columns: 1fr;
    }
    .tp-grid-highlights {
      grid-template-columns: 1fr;
    }
    .tp-grid-testimonials {
      grid-template-columns: 1fr;
    }
    .tp-footer {
      grid-template-columns: 1fr;
    }
    .tp-footer-cols {
      grid-template-columns: 1fr;
    }
    #frame[data-vp='tablet'] .tp-footer-cols {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
    #frame[data-vp='desktop'] .tp-footer-cols {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    /* Tablet mode */
    #frame[data-vp='tablet'] .tp-hero {
      grid-template-columns: 1fr;
    }
    #frame[data-vp='tablet'] .tp-grid-apartments {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    #frame[data-vp='tablet'] .tp-grid-highlights {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    #frame[data-vp='tablet'] .tp-grid-testimonials {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    /* Desktop mode */
    #frame[data-vp='desktop'] .tp-header {
      padding-left: 1.75rem;
      padding-right: 1.75rem;
    }
    #frame[data-vp='desktop'] .tp-header-inner {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }
    #frame[data-vp='desktop'] .tp-hero {
      grid-template-columns: repeat(12, minmax(0, 1fr));
      align-items: center;
    }
    #frame[data-vp='desktop'] .tp-hero > div {
      grid-column: span 7 / span 7;
    }
    #frame[data-vp='desktop'] .tp-hero > aside {
      grid-column: span 5 / span 5;
    }

    #frame[data-vp='desktop'] .tp-grid-apartments {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
    #frame[data-vp='desktop'] .tp-grid-highlights {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
    #frame[data-vp='desktop'] .tp-grid-testimonials {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    #frame[data-vp='desktop'] footer {
      padding-left: 1.75rem;
      padding-right: 1.75rem;
    }
    #frame[data-vp='desktop'] .tp-footer {
      grid-template-columns: repeat(12, minmax(0, 1fr));
    }
    #frame[data-vp='desktop'] .tp-footer > div:first-child {
      grid-column: span 5 / span 5;
    }
    #frame[data-vp='desktop'] .tp-footer > div:last-child {
      grid-column: span 7 / span 7;
    }

    /* Viewport buttons styling via data-active (no Tailwind purge issues) */
    .tp-vp-btn {
      color: var(--tp-muted);
    }
    .tp-vp-btn:hover {
      background: var(--tp-surface-2);
    }
    .tp-vp-btn[data-active='true'] {
      background: var(--tp-surface-2);
      color: var(--tp-text);
      box-shadow: inset 0 0 0 1px var(--tp-border);
    }
  </style>

  <script>
    const frame = document.getElementById('frame');
    const typoSelect = document.getElementById('typoSelect');
    const vpButtons = Array.from(document.querySelectorAll('.tp-vp-btn'));

    function setTypo(id) {
      frame?.setAttribute('data-typo', id);
      document.body.setAttribute('data-typo', id);
      if (typoSelect && typoSelect.value !== id) typoSelect.value = id;
    }

    function setVp(vp) {
      frame?.setAttribute('data-vp', vp);
      vpButtons.forEach(b => {
        b.setAttribute(
          'data-active',
          b.getAttribute('data-vp') === vp ? 'true' : 'false'
        );
      });
    }

    typoSelect?.addEventListener('change', e => setTypo(e.target.value));
    vpButtons.forEach(btn =>
      btn.addEventListener('click', () => setVp(btn.getAttribute('data-vp')))
    );

    // defaults
    setTypo('a');
    setVp('desktop');
  </script>
</Layout>
